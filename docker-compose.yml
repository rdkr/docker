web-volumes:
  image: 'debian:jessie'
  volumes:
    - /var/www
    - /etc/nginx/common
    - /etc/nginx/conf.d
    - /var/lib/mysql

web-data:
  build: 'web-data'
  volumes_from:
    - web-volumes
  volumes:
    - './mnt:/mnt'
  links:
    - web-mariadb

web-hhvm:
  build: 'web-hhvm'
  volumes_from:
    - web-volumes
  links:
    - web-mariadb
  restart: always

web-nginx:
  build: 'web-nginx'
  volumes_from:
    - web-volumes  
  links:
    - web-hhvm
  ports:
    - '80:80'
  restart: always

web-mariadb:
  image: 'mariadb'
  volumes_from:
    - web-volumes
  environment:
    - MYSQL_ALLOW_EMPTY_PASSWORD=yes
  restart: always