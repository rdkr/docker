web-data:
  build: 'web-data'
  volumes_from:
    - web-volumes
  volumes:
    - './data:/tmp/data'
  links:
    - web-mariadb

web-volumes:
  image: 'debian:jessie'
  volumes:
    - /var/www
    - /tmp/db
    - /etc/nginx/common
    - /etc/nginx/conf.d
    - /var/lib/mysql

web-hhvm:
  image: 'diegomarangoni/hhvm:fastcgi'
  volumes_from:
    - web-volumes
  links:
    - web-mariadb

web-nginx:
  build: 'web-nginx'
  volumes_from:
    - web-volumes  
  links:
    - web-hhvm
  ports:
    - '80:80'

web-mariadb:
  image: 'mariadb'
  volumes_from:
    - web-volumes
  environment:
    - MYSQL_ALLOW_EMPTY_PASSWORD=yes